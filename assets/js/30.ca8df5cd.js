(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{438:function(t,a,e){t.exports=e.p+"assets/img/trade.a186e586.jpg"},507:function(t,a,e){"use strict";e.r(a);var s=e(2),r=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"组件介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件介绍"}},[t._v("#")]),t._v(" 组件介绍")]),t._v(" "),a("p",[t._v("交易页。包括，用户确认订单信息、选择收货地址。")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:e(438)}}),t._v(" "),a("h2",{attrs:{id:"进入离开组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入离开组件"}},[t._v("#")]),t._v(" 进入离开组件")]),t._v(" "),a("p",[t._v("1、由ShopCart组件，路由跳转进入；参数：无")]),t._v(" "),a("p",[t._v("2、跳转进入Pay路由组件；参数：orderId订单id")]),t._v(" "),a("h2",{attrs:{id:"生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),a("p",[t._v("1、mounted ()")]),t._v(" "),a("p",[t._v("1.1、调用vuex-actions-getUserAddress：向服务器发送”获取用户地址数据“的网络请求，如果服务器返回的result正常，则将返回的data保存到state中，以供组件使用。")]),t._v(" "),a("p",[t._v("1.2、调用vuex-actions-getOrderInfo：向服务器发送”获取商品清单数据“的网络请求，如果服务器返回的result正常，则将返回的data保存到state中，以供组件使用。")]),t._v(" "),a("h2",{attrs:{id:"数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据"}},[t._v("#")]),t._v(" 数据")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("数据类型")]),t._v(" "),a("th",[t._v("所属")]),t._v(" "),a("th",[t._v("数据介绍")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("msg")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("data")]),t._v(" "),a("td",[t._v("用户输入的买家留言")])]),t._v(" "),a("tr",[a("td",[t._v("orderId")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("data")]),t._v(" "),a("td",[t._v("组件仓库state中获取到的服务器返回的订单号")])]),t._v(" "),a("tr",[a("td",[t._v("userAddress")]),t._v(" "),a("td",[t._v("array")]),t._v(" "),a("td",[t._v("computed")]),t._v(" "),a("td",[t._v("组件仓库state中获取到的服务器返回的用户地址数据")])]),t._v(" "),a("tr",[a("td",[t._v("userOrderInfo")]),t._v(" "),a("td",[t._v("object")]),t._v(" "),a("td",[t._v("computed")]),t._v(" "),a("td",[t._v("组件仓库state中获取到的服务器返回的商品清单数据")])]),t._v(" "),a("tr",[a("td",[t._v("userDefaultAddress")]),t._v(" "),a("td",[t._v("object")]),t._v(" "),a("td",[t._v("computed")]),t._v(" "),a("td",[t._v("从userAddress分离出来的用户默认地址数据")])])])]),t._v(" "),a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),a("p",[t._v("1、获取用户地址")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('地址：/api/user/userAddress/auth/findUserAddresslist  请求方式:get   无参\nexport const reqAddressInfo = () =>\n  requests({\n    url: "/user/userAddress/auth/findUserAddressList", method: "get"});\n')])])]),a("p",[t._v("2、获取商品清单")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('地址：/api/order/auth/trade  请求方式:get   无参\nexport const reqOrderInfo = () =>\n  requests({ url: "/order/auth/trade", method: "get" });\n')])])]),a("p",[t._v("3、提交订单")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('地址：/api/order/auth/submitOrder?tradeNo={tradeNo}  请求方式: post   需要带参数tradeNo, data{consigne,totalPrice...}\nexport const reqSubmitOrder = (tradeNo, data) =>\n  requests({ url: `/order/auth/submitOrder?tradeNo=${tradeNo}`, data, method: "post"});\n')])])]),a("h2",{attrs:{id:"vuex"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuex"}},[t._v("#")]),t._v(" vuex")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vuex-trade：\n1、actions\n1.1、getUserAddress\n调用API-获取用户地址；服务器返回请求成功，则调用mutations-GETUSERADDRESS\n1.2、getOrderInfo\n调用API-获取商品清单；服务器返回请求成功，则调用mutations-GETORDERINFO\n\n2、mutations\n2.1、GETUSERADDRESS\n将服务器返回的用户地址数据保存到state的userAddress中，以供组件调用\n2.2、GETORDERINFO\n将服务器返回的商品清单数据保存到state的orderInfo中，以供组件调用\n\n3、state\nuserAddress:[] \t\t\t// 服务器返回的用户地址数据，数组\norderInfo:{} \t\t\t// 服务器返回的商品清单数据，对象\n")])])]),a("h2",{attrs:{id:"methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#methods"}},[t._v("#")]),t._v(" methods")]),t._v(" "),a("p",[t._v("1、submitOrder()\t提交订单")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1、参数：无\n\n2、函数内容：\n2.1、准备提交订单需要的参数；\n2.2、调用API-获取用户地址；\n2.3、请求返回成功，获取服务器传回的订单号，并路由跳转（且携带订单号作为参数进行跳转）至Pay路由组件。\n")])])]),a("h2",{attrs:{id:"功能点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能点"}},[t._v("#")]),t._v(" 功能点：")]),t._v(" "),a("p",[t._v("1、页面数据动态展示")]),t._v(" "),a("p",[t._v("组件在mounted阶段，调用vuex-actions；vuex调用获取用户地址和商品清单相关数据的API，向服务器发送请求；服务器返回成功则将返回的data保存到state中；本组件的computed获取vuex-state数据，并保存为计算属性；页面在展示时，使用相应的属性即可。")]),t._v(" "),a("p",[t._v("2、提交订单\n用户点击按钮，调用提交订单的API，向服务器发送请求；服务器返回成功则将返回的data保存到组件data中；组件携带服务器返回的data路由跳转至Pay路由组件。")])])}),[],!1,null,null,null);a.default=r.exports}}]);