(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{456:function(t,a,s){t.exports=s.p+"assets/img/spuManagement-addSku.5b21c94e.png"},517:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"静态组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#静态组件"}},[t._v("#")]),t._v(" 静态组件")]),t._v(" "),a("img",{attrs:{src:s(456)}}),t._v(" "),a("h2",{attrs:{id:"组件介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件介绍"}},[t._v("#")]),t._v(" 组件介绍")]),t._v(" "),a("p",[t._v("实现对某条spu类添加一个sku实例的新增操作。")]),t._v(" "),a("h2",{attrs:{id:"进入离开组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入离开组件"}},[t._v("#")]),t._v(" 进入离开组件")]),t._v(" "),a("p",[t._v("作为Spu组件的子组件，由用户在Spu组件，点击“添加SkU”按钮，进入本组件。")]),t._v(" "),a("p",[t._v("父Spu组件为本组件绑定了一个自定义事件changeScene2，以确定从本组件返回时页面的显示区域。")]),t._v(" "),a("h2",{attrs:{id:"数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据"}},[t._v("#")]),t._v(" 数据")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("数据类型")]),t._v(" "),a("th",[t._v("所属")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("数据介绍")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("spu")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Spu组件传过来的当前sku对应的spu信息")])]),t._v(" "),a("tr",[a("td",[t._v("attrInfoList")]),t._v(" "),a("td",[t._v("Array")]),t._v(" "),a("td",[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该SPU所属的三级分类的平台属性数据；sku的平台属性从中选择")])]),t._v(" "),a("tr",[a("td",[t._v("spuSaleAttrList")]),t._v(" "),a("td",[t._v("Array")]),t._v(" "),a("td",[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该SPU下所有的销售属性数据；sku的销售属性从中选择")])]),t._v(" "),a("tr",[a("td",[t._v("spuImageList")]),t._v(" "),a("td",[t._v("Array")]),t._v(" "),a("td",[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该SPU下所有的商品图片数据；sku的图片属性从中选择")])]),t._v(" "),a("tr",[a("td",[t._v("skuInfo")]),t._v(" "),a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("与添加sku页面里的表单绑定的数据")])]),t._v(" "),a("tr",[a("td",[t._v("selectedImgList")]),t._v(" "),a("td",[t._v("Array")]),t._v(" "),a("td",[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("用户从图片列表中，选中的图片数据")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('skuInfo: {\n    // 第一类数据：由spu组件传递过来的数据，sku实例所属的spu类的相关数据，比如所属的三级分类的id，spu类的id...\n    category3Id: 0,\t\t\n    spuId: 0,\n    tmId: 0,\n\n    // 第二类数据：由用户输入，v-model双向绑定表单的数据，比如sku名称、sku描述...\n    skuName: "",\n    price: 0,\n    weight: "",\n    skuDesc: "",\n\n    // 第三类数据：从服务器获取的数据，\n    skuDefaultImg: "",    \t\t\t// 默认图片url\n    skuImageList: \t\t\t\t\t// 已选择的作为sku实例的图片数据（图片来源是sku实例所属的spu类的全部图片列表）\n    [\n      {\n        id: 0,\n        imgName: "",\n        imgurl: "",\n        isDefault: "",\t\t\t\t// 其中，isDefault属性是程序员自己添加的，作为识别哪张图片是默认图片的标识\n        skuld: 0,\n        spuImgId: 0,\n      }\n    ],\n    skuAttrValueList: \t\t\t\t// 已选择的作为sku实例的平台属性数据（数据来源是所属三级分类的全部平台属性）\n    [\n      {\n        attrId: 0,\n        attrName: "",\n        id: 0,\n        skuId: 0,\n        valueId: 0,\n        valueName: "",\n      }\n    ],\n    skuSaleAttrValueList: \t\t\t// 已选择的作为sku实例的销售属性数据（数据来源是所属spu类的全部销售属性）\n    [\n      {\n        id: 0,\n        saleAttrId: 0,\n        saleAttrName: "",\n        saleAttrValueId: 0,\n        saleAttrValueName: "",\n        skuId: 0,\n        spuId: 0,\n      }\n    ],\n},\n')])])]),a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),a("p",[t._v("1、获取某条spu类的全部图片")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// 路径：/admin/product/spuImageList/{spuId}\t请求方式：get\t参数：spuId\nexport const reqSpuImageList = (spuId) =>\n  request({ url: `/admin/product/spuImageList/${spuId}`, method: "get" });\n')])])]),a("p",[t._v("2、获取某条spu类的全部销售属性数据")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// 路径：/admin/product/spuSaleAttrList/{spuId}\t请求方式：get\t参数：spuId\nexport const reqSpuSaleAttrList = (spuId) =>\n  request({ url: `/admin/product/spuSaleAttrList/${spuId}`, method: "get" });\n')])])]),a("p",[t._v("3、获取某个三级商品分类下的全部平台属性数据")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// 路径：/admin/product/attrInfoList/{category1Id}/{category2Id}/{category3Id}\t\t请求方式：get\t参数：category1Id\t\tcategory2Id\t\tcatrgory3Id\nexport const reqAttrInfoList = (category1Id, category2Id, category3Id) =>\n  request({ url: `/admin/product/attrInfoList/${category1Id}/${category2Id}/${category3Id}`, method: "get" });\n')])])]),a("p",[t._v("4、为某条spu类添加sku实例")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// 路径：/admin/product/saveSkuInfo\t请求方式：post\t参数：skuInfo\nexport const reqAddSku = (skuInfo) =>\n  request({ url: `/admin/product/saveSkuInfo/`, method: "post", data: skuInfo });\n')])])]),a("h2",{attrs:{id:"methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#methods"}},[t._v("#")]),t._v(" methods")]),t._v(" "),a("p",[t._v("1、initSkuData (category1Id, category2Id, row)")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1、参数：category1Id\tcategory2Id\t\trow 要新增sku的spu的相关数据\n\n2、函数内容：\n2.1、当在父组件Spu中，点击“添加sku实例”按钮时，调用本组件的initSkuData函数；\n2.2、调用API-获取spu图片，等待服务器返回结果；如果返回结果成功，给返回的每个图片数据项添加isDefault属性并保存到data:spuImageList中；\n2.3、调用API-获取spu销售属性数据，等待服务器返回结果；如果返回结果成功，将返回的数据保存到data:spuSaleAttrList中；\n2.4、调用API-获取spu所属三级分类的平台属性数据，等待服务器返回结果；如果返回结果成功，将返回的数据保存到data:attrInfoList中；\n2.5、将需要在表单上展示的数据，复制到data:spu中。\n")])])]),a("p",[t._v("2、handleSelectionChange(val)\t图片选择列表中选择项发生变化时的回调函数")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1、参数：val 用户选中的行的数据组成的数组\n\n2、函数内容：\n2.1、获取用户选中行的数据，组成数组，赋值给data:selectedImgList\n")])])]),a("p",[t._v("3、setDefalut (row)\t设置某张图片为默认图片")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1、参数：row 选择的图片所在的行数据\n\n2、函数内容：\n2.1、将图片列表数据data:spuImageList中，每一项的isDefault属性都置为false；\n2.2、将带设置默认图片的isDefault属性置为true；\n2.3、将data:spuImageList赋值给data:spu中的图片属性，以实现表单展示的默认图片切换。\n")])])]),a("p",[t._v("4、saveAdd()\t保存sku实例的添加")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1、参数：无\n\n2、函数内容：\n2.1、整理参数，把用户选择的平台属性、销售属性、图片数据这三项表单数据，整理到skuInfo中。（之前是在其他数据中，现在需要向服务器提交，所以要保存到data:skuInfo中）\n2.2、调用API-添加sku实例，等待服务器返回结果；如果返回成功，则弹出消息框提示，并触发Spu组件绑定的自定义事件changeScene2，向其传递消息；\n")])])]),a("h2",{attrs:{id:"功能点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能点"}},[t._v("#")]),t._v(" 功能点")]),t._v(" "),a("p",[t._v("1、页面数据初始化")]),t._v(" "),a("p",[t._v("父组件Spu里点击“添加sku实例”按钮，调用SkuForm的页面数据初始化函数，调用相应的API，向服务器发送请求；服务器返回成功则将返回的数据保存到组件data中，完成页面数据初始化；")]),t._v(" "),a("p",[t._v("2、sku属性的编辑")]),t._v(" "),a("p",[t._v("用户在表单内的每步操作对应的数据变动，都对应记录在数据data中；")]),t._v(" "),a("p",[t._v("平台属性：attrInfoList、 销售属性：spuSaleAttrList、图片数据：selectedImgList、其他数据：skuInfo。")]),t._v(" "),a("p",[t._v("3、保存对sku属性的编辑")]),t._v(" "),a("p",[t._v("用户点击保存按钮，将未保存到skuInfo中的表单数据保存过来，调用保存属性的API，向服务器发送请求；服务器返回成功则弹出消息框提示，切换回spu展示页面。")]),t._v(" "),a("p",[t._v("4、取消对sku属性的编辑")]),t._v(" "),a("p",[t._v("用户点击取消按钮，清空data数据，切换回spu展示页面。")])])}),[],!1,null,null,null);a.default=n.exports}}]);